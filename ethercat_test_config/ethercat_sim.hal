# SUPER SIMPLE HAL Configuration - SIMULATED (NO HARDWARE)
# For testing the UI without EtherCAT hardware

# Load trivkins kinematics and motion controller
loadrt trivkins coordinates=X
loadrt motmod servo_period_nsec=1000000 num_joints=1

# Load limit3 for simple position simulation
loadrt limit3 count=1

# Add functions to servo thread
addf motion-command-handler servo-thread
addf motion-controller servo-thread
addf limit3.0 servo-thread

# Simple simulated axis using limit3 (integrator with limits)
# This will smoothly move to commanded position
net x-pos-cmd joint.0.motor-pos-cmd => limit3.0.in
net x-pos-fb limit3.0.out => joint.0.motor-pos-fb

# Set reasonable limits for smooth motion
setp limit3.0.maxv 50     # Max velocity
setp limit3.0.maxa 100    # Max acceleration
setp limit3.0.enable 1    # Enable the limit3 block

# Simple enable chain
net x-enable joint.0.amp-enable-out

# E-stop loopback - connect e-stop loop for simulation
net estop-loop iocontrol.0.user-enable-out iocontrol.0.emc-enable-in

# Home switch simulation - always triggered for instant homing
net home-x joint.0.home-sw-in <= joint.0.homing