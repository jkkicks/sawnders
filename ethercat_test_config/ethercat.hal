# SUPER SIMPLE HAL Configuration for Single EtherCAT Axis
# Minimal setup - just what's needed to jog one axis

# Load the EtherCAT driver (LinuxCNC-EtherCAT)
loadrt lcec
addf lcec.0.read servo-thread
addf lcec.0.write servo-thread

# Load trivkins kinematics and motion controller
loadrt trivkins coordinates=X
loadrt motmod servo_period_nsec=1000000 num_joints=1
addf motion-command-handler servo-thread
addf motion-controller servo-thread

# Create simple jog signals
net jog-x-pos halui.axis.x.plus
net jog-x-neg halui.axis.x.minus
net jog-speed halui.axis.jog-speed

# Connect EtherCAT drive to motion
# Assuming basic EtherCAT servo drive at position 0
net x-pos-cmd joint.0.motor-pos-cmd => lcec.0.0.pos-cmd
net x-pos-fb lcec.0.0.pos-fb => joint.0.motor-pos-fb

# Simple enable chain
net x-enable joint.0.amp-enable-out => lcec.0.0.enable

# Basic setup for joint 0
setp joint.0.jog-vel-mode 1
setp halui.axis.jog-speed 10

# Machine on/off
net machine-on halui.machine.on
net machine-off halui.machine.off
net machine-is-on halui.machine.is-on